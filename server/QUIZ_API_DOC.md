

## Auth/User Endpoints

### 1. Register
- **POST** `/api/auth/register`
- **Body:** `{ name, email, password }`
**Response:**
```
{
  message: "User registered successfully",
  token: "JWT_TOKEN",
  user: { id: string, name: string, email: string }
}
```

### 2. Login
- **POST** `/api/auth/login`
- **Body:** `{ email, password }`
**Response:**
```
{
  token: "JWT_TOKEN",
  user: { id: string, name: string, email: string }
}
```

### 3. Profile (Protected)
- **GET** `/api/auth/profile`
- **Auth:** Required
**Response:**
```
{
  message: "Protected profile route accessed",
  user: { id: string, name: string, email: string }
}
```

## Endpoints

### 1. Create Quiz
- **POST** `/api/quizzes/`
- **Auth:** Required
- **Body:** `{ title, topic, questions, duration, isAIgenerated }`
**Response:**
```
{
  _id: string,           // Unique quiz ID
  title: string,         // Quiz title
  topic: string,         // Quiz topic
  questions: [           // Array of question objects
    {
      question: string,
      options: [string],
      answer: string
    }
  ],
  duration: number,      // Duration in minutes
  isAIgenerated: boolean,// True if generated by AI
  roomCode: string,      // Unique room code
  creator: string,       // User ID of creator
  createdAt: string      // ISO date string
}
```

### 2. Generate AI Quiz
- **POST** `/api/quizzes/ai/generate`
- **Auth:** Required
- **Body:** `{ topic, numberOfQuestions }`
**Response:**
```
{
  topic: string,         // Topic for generated quiz
  questions: [           // Array of generated questions
    {
      question: string,
      options: [string],
      answer: string
    }
  ]
}
```

### 3. Save AI Quiz
- **POST** `/api/quizzes/ai/save`
- **Auth:** Required
- **Body:** `{ topic, questions, duration }`
**Response:**
```
{
  _id: string,           // Unique quiz ID
  topic: string,         // Quiz topic
  questions: [           // Array of question objects
    {
      question: string,
      options: [string],
      answer: string
    }
  ],
  duration: number,      // Duration in minutes
  isAIgenerated: true,   // Always true for AI quizzes
  roomCode: string,      // Unique room code
  creator: string,       // User ID of creator
  createdAt: string      // ISO date string
}
```

### 4. Get All Quizzes by User
- **GET** `/api/quizzes/user/all`
- **Auth:** Required
**Response:**
```
[
  {
    _id: string,
    title: string,
    topic: string,
    roomCode: string,
    createdAt: string,
    isAIgenerated: boolean,
    duration: number
    // ...other quiz attributes
  }
]
```

### 5. Get Quiz by Room Code
- **GET** `/api/quizzes/:roomCode`
- **Auth:** Not required
**Response:**
```
{
  _id: string,
  title: string,
  topic: string,
  questions: [           // Array of question objects (answers omitted)
    {
      question: string,
      options: [string]
    }
  ],
  duration: number,
  roomCode: string,
  creator: string,
  createdAt: string
}
```

### 6. Submit Quiz Attempt
- **POST** `/api/quizzes/:roomCode/submit`
- **Auth:** Required
- **Body:** `{ answers, timeTaken }`
**Response:**
```
{
  message: string,       // Submission status
  score: number,         // User's score
  total: number,         // Total possible score
  timeTaken: number      // Time taken in seconds
}
```

### 7. Get Quiz Result
- **GET** `/api/quizzes/:roomCode/result`
- **Auth:** Required
**Response:**
```
{
  score: number,         // User's score
  total: number,         // Total possible score
  answers: [string],     // User's submitted answers
  correctAnswers: [string], // Correct answers
  timeTaken: number      // Time taken in seconds
}
```

### 8. Get Leaderboard
- **GET** `/api/quizzes/:roomCode/leaderboard`
- **Auth:** Not required
**Response:**
```
{
  leaderboard: [
    {
      name: string,      // User's display name
      score: number,     // User's score
      timeTaken: number  // Time taken in seconds
    }
  ]
}
```

**Socket Event:**
- On quiz submission, the server emits a `leaderboardUpdate` event to the quiz room:
  - **Event name:** `leaderboardUpdate`
  - **Room:** `roomCode` (Socket.io room for the quiz)
  - **Payload:**
    ```js
    {
      user: string,      // User's display name
      score: number,     // User's score
      timeTaken: number  // Time taken in seconds
    }
    ```
  - **Usage:** Listen for this event on the client to update the leaderboard in real-time.

### 9. Get Analytics
- **GET** `/api/quizzes/:roomCode/analytics`
- **Auth:** Required (creator only)
**Response:**
```
{
  totalAttempts: number,        // Number of attempts
  averageScore: number,         // Average score
  bestPerformer: {
    name: string,
    score: number,
    timeTaken: number
  },
  worstPerformer: {
    name: string,
    score: number,
    timeTaken: number
  },
  questionWiseStats: [
    {
      question: string,
      correctCount: number,     // Number of users who answered correctly
      incorrectCount: number    // Number of users who answered incorrectly
    }
  ]
}
```
